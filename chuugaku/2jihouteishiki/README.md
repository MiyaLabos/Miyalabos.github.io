# 二次方程式プリント（ax^2 + bx + c = 0）

このディレクトリは、二次方程式の問題を自動生成し、問題・模範解答を個別に印刷できるシングルページ（`2jihouteishiki.html`）を提供します。整数解だけでなく、平方根を含む実数解の問題も生成できます。

## 特長

- 問題の自動生成：指定範囲・条件に基づきランダム生成
- 2モード対応：
  - 因数分解で解ける形（整数解）
  - 因数分解では解けない形（平方根を含む実数解）
- 印刷最適化：A4・2列レイアウト、問題のみ／解答のみ印刷
- プレビュー表示：設定変更に応じた例題を即時表示
- 依存：MathJax（CDN）で数式を美しく表示

## 使い方

1. `2jihouteishiki.html` をブラウザで開きます。
2. 画面上部の「生成条件」を設定します（下記「操作項目」参照）。
3. 「問題を生成」を押すと、下部に「問題」「模範解答」が表示されます。
4. 印刷する場合は「問題だけ印刷」または「模範解答だけ印刷」を押して印刷ダイアログから実行します。
   - 用紙サイズは A4 を想定しています。
   - 10問/20問の切替で印刷レイアウト（行数）が最適化されます。

GitHub Pages で公開している場合は、該当サイトのこのディレクトリ配下のページにアクセスしてください（例：`.../chuugaku/2jihouteishiki/2jihouteishiki.html`）。

## 操作項目（生成条件）

- a の絶対値の範囲：`1〜9` で指定（`a ≠ 0`）。
- 解 x の範囲：`-50〜50` で指定。
  - 「負の数を含める」をオフにすると、解の最小値は `0` 以上である必要があります。
- 負の数を含める：オンで係数や解に負符号を含めます（a の符号もランダム）。
- 重解を含める：オンで重解（同じ解が2つ）を許可。オフで異なる2解のみ生成。
- 形の種類：
  - 因数分解で解ける形（整数解）
  - 因数分解では解けない形（実数解）
- √の中身（判別式 D）の上限（非因数分解時）：非因数分解モードでのみ有効。`D ≤ 上限` の問題のみ生成。
- 問題数：`10問` / `20問` をトグルで選択。
- プレビュー：現在の設定で生成される例題を表示。

エラー時は入力欄下のメッセージに理由が表示されます（例：範囲の最小・最大の整合性など）。

## 出力と表示の仕様

- 問題：`x = ____` の空欄が並ぶ形式（2解が必要な場合は空欄が2つ）。
- 模範解答：
  - 因数分解モード：整数解を小さい順で表示（重解は1つに見える形で表示）。
  - 非因数分解モード：二次方程式の解の公式に基づき `x = (有理数部 ± k√m) / 分母` の形で表示。
    - `D` の平方因子を外に出し、`k√m` に簡約。
    - 有理数部・無理数部・分母で最大公約数により既約分数化。
    - 分母は常に正となるよう正規化。
- 数式表示：MathJax により `\( ... \)` の TeX 形式をレンダリングします。

## 印刷のコツ

- 「問題だけ印刷」「模範解答だけ印刷」ボタンを使用すると、該当ページのみ2列レイアウトで印刷されます。
- ブラウザの印刷設定で余白や倍率が影響する場合があります。内容が切れる場合は余白を「最小」、倍率を 95–100% 付近に調整してください。
- 用紙は A4 縦を想定。10問は5行×2列、20問は10行×2列で均等配置されます。

## カスタマイズ（開発者向け）

- CSS 変数（`<style>` 冒頭付近）：
  - `--xcol-w`（画面）/ `--xcol-w-print`（印刷）：`x =` の開始位置を揃えるための式部分の固定幅。
- 係数のランダム上限（非因数分解）：
  - `BMAX`（`b` の絶対値上限）、`CMAX`（`c` の絶対値上限）をファイル内で調整可能。
- 既定の生成・プレビュー実行：ページ末尾で初回 `generateProblems()` を呼び出し、ロード直後に例題が表示されます。

## 実装方針（概要）

- 因数分解モード：
  - 先に整数の解 `r1, r2` を生成し、`a(x - r1)(x - r2)` を展開して係数 `a, b, c` を得ます。
  - 重解禁止の場合は `r1 ≠ r2` になるまで再試行（安全回数内）。
- 非因数分解モード：
  - `a, b, c` を範囲内でランダムに生成し、判別式 `D = b^2 - 4ac` を評価。
  - 条件：`D > 0`、`D` が非平方数、`D ≤ 上限`、かつ両根が指定範囲内。
  - 表示時に `D` の平方因子を外に出し、分母・分子を最大公約数で約分し、分母を正に正規化。

## ファイル構成

- `2jihouteishiki.html`：本ページ本体（HTML/CSS/JavaScript を1ファイルに同梱）。

## 注意事項

- 数式表示に MathJax（CDN）を利用しています。オフライン環境では TeX がそのまま表示されることがあります（印刷品質に影響）。
- ブラウザ差異により印刷結果が若干異なる場合があります。最新の Chrome/Edge/Firefox を推奨します。

