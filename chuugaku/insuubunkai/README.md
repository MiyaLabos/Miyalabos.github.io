# 因数分解プリント（x^2 + bx + c, 係数1固定）

このディレクトリは、中学生向けの二次式の因数分解練習問題を自動生成し、問題・模範解答を個別に印刷できるシングルページ（`insuubunkai.html`）を提供します。二次の係数は 1（モニック）に固定しています。

## 特長

- 問題の自動生成：指定範囲・条件に基づきランダム生成
- 解答の体裁最適化：
  - 片方の因数が 0 のときは `x(x + a)` 形式に整形
  - 重解のときは `(x + a)^2`（`a = 0` のときは `x^2`）
- 印刷最適化：A4・2列レイアウト、問題のみ／解答のみ印刷
- 数式表示：MathJax（CDN）で見やすく表示

## 使い方

1. `insuubunkai.html` をブラウザで開きます。
2. 画面上部の「生成条件」を設定します（下記「操作項目」参照）。
3. 「問題を生成」または「プレビューを更新」を押すと、下部に「問題」「模範解答」が表示されます。
4. 印刷は「問題だけ印刷」または「模範解答だけ印刷」を選んで実行します。
   - GitHub Pages 公開時は、`.../chuugaku/insuubunkai/insuubunkai.html` へアクセスします。

## 操作項目（生成条件）

- 因数の範囲：`p, q` の範囲を `-20〜20` で指定（初期値: `-9〜9`）
- 負の数を含める：オンで `p, q` に負符号を含めます（オフで 0 以上に制限）
- 重解を含める：オンで `p = q` を許可。オフで `p ≠ q` のみ生成
- 問題数：`10問` / `20問` をトグルで選択
- ボタン：`問題を生成` / `プレビューを更新` / `問題だけ印刷` / `模範解答だけ印刷`

エラー時は入力欄下のメッセージに理由が表示されます（範囲の整合性など）。

## 出力と表示の仕様

- 問題：`x^2 + bx + c = (  )(  )` の空欄形式（画面・印刷とも2列均等配置）
- 模範解答：`x^2 + bx + c =` の右辺を以下の規則で表示します。
  - 重解：`(x + a)^2`（`a = 0` のときは `x^2`）
  - 片方が 0：`x(x + a)`（`a` はもう一方の因数）
  - それ以外：`(x + p)(x + q)`
- 数式表示：MathJax により `\( ... \)` の TeX 形式をレンダリングします。

## 印刷のコツ

- 「問題だけ印刷」「模範解答だけ印刷」で対象ページのみ2列レイアウト印刷になります。
- 均等配置：10問は5行×2列、20問は10行×2列で均等配置されます。
- 余白の微調整：`:root` の次の変数で調整可能です。
  - `--print-problems-offset`：問題ページの高さから差し引く量（既定 `22mm`）
  - `--print-answers-extra`：解答ページの追い引き量（既定 `18mm`）
- ブラウザの印刷設定で余白や倍率が影響する場合があります。内容が切れる場合は余白を「最小」、倍率を 95–100% 付近に調整してください。

## 実装概要（開発者向け）

- 生成アルゴリズム：`p, q` を指定範囲からランダムに選び、`b = p + q`, `c = p * q` を算出。
  - 重解禁止時は `p ≠ q` になるまで再試行。
- 解答表示の整形：`texFactorizationFromPQ(p, q)` で体裁を整えます。
- 初期表示：ロード時に自動で `generateProblems()` を実行し、プレビューを表示します。

## カスタマイズ（開発者向け）

- CSS 変数（`<style>` 冒頭）：
  - `--xcol-w`（画面）/ `--xcol-w-print`（印刷）：式の固定幅（=の左）
  - `--print-problems-offset` / `--print-answers-extra`：印刷時の高さ調整
  - `--accent` など配色
- 出題コントロール：必要に応じて UI にトグルを追加し、生成関数で条件を反映してください。
  - 例：`c = 0` を除外したい場合は、`p = 0` または `q = 0` のケースをスキップする分岐を追加します。

## ファイル構成

- `insuubunkai.html`：本ページ本体（HTML/CSS/JavaScript を1ファイルに同梱）

## 注意事項

- 数式表示に MathJax（CDN）を利用しています。オフライン環境では TeX がそのまま表示されることがあります（印刷品質に影響）。
- ブラウザ差異により印刷結果が若干異なる場合があります。最新の Chrome/Edge/Firefox を推奨します。

