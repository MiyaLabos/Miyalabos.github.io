# はば単プリント＆クイズメーカー

## プロジェクト概要
- 兵庫県教育委員会が公開する「はば単 2,500」をもとに、筆記用プリントと 5 択クイズを生成する静的 Web アプリケーションです。
- `index.html` では印刷用の小テストを作成し、`print.js` がブラウザ上で問題と解答一覧を自動生成します。
- `quiz.html` では `quiz.js` を用いて 5 択クイズを実行し、出題形式や問題数を切り替えられます。
- プリント作成では 1～2,500 番の範囲を指定して対象単語を絞り込めます。

## ディレクトリ構成
- `index.html` / `print.js` / `styles.css`: プリント作成ページの UI と印刷レイアウトを制御します。
- `quiz.html` / `quiz.js`: クイズページの UI と状態管理を担当します。
- `data/words.json`: 出題に使用する単語データ。例文や品詞情報を含む JSON 配列です。
- `scripts/extract_words.py`: 元 PDF から単語情報を抽出し `data/words.json` を生成する補助スクリプトです。
- `print.js` と `quiz.js` の双方で `fetch("data/words.json")` を利用するため、ローカルファイルを直接開くとデータを読み込めません。

## 動作手順
1. 任意のディレクトリで簡易サーバーを起動します。
   ```bash
   python3 -m http.server 8000
   ```
2. ブラウザで `http://localhost:8000/index.html` にアクセスすると、プリント作成ページが表示されます。
   - 出題形式（英→日 / 日→英）と 1 ページあたりの問題数を選び、生成ボタンでプレビューと解答を表示できます。
   - 出題番号の開始・終了値（1～2,500）を設定すると、その範囲の単語だけで問題を構成します。
   - プレビュー確認後に「印刷」ボタンからそのまま印刷できます。
3. クイズ学習を行う場合は `http://localhost:8000/quiz.html` を開きます。
   - 出題形式と出題数を設定し、「テスト開始」で 5 択クイズが始まります。
   - 各設問は正誤判定と詳細解説を表示し、終了時に成績サマリーを示します。

## データ更新手順
1. 元データとなる PDF（例: `R3ver2_Habatanforstudents.pdf`）を `scripts/extract_words.py` と同じ階層に置きます。
2. 以下のコマンドで JSON を再生成します。
   ```bash
   python3 scripts/extract_words.py R3ver2_Habatanforstudents.pdf --output data/words.json
   ```
3. 生成後はブラウザを再読み込みして最新データを反映します。

## 備考
- `print.js` と `quiz.js` では共通のバリデーション（品詞や意味の有無）を行い、欠落したデータは出題対象から除外します。
- クイズ画面ではキーボード操作（`Enter` で次へ、`Escape` で終了確認）に対応しています。
- 印刷プレビューやクイズ結果にはアクセシビリティを考慮した `aria-live` 属性やフォーカス制御が設定されています。
